---
categories:
- ğŸ“š TD/TP
---

# ğŸ“š | TD 8 : Catalogue dâ€™artistes et de musiques

## 1. ğŸš¦ **Mise en route (20 min)**

### 1.1. CrÃ©ation du projet Laravel

https://laravel.com/docs/12.x/installation

1. Installer Laravel si ce nâ€™est pas dÃ©jÃ  fait.
2. CrÃ©er un nouveau projet nommÃ© `music-app`.
3. Lancer le serveur de dÃ©veloppement Laravel.
4. VÃ©rifier que le site s'ouvre dans le navigateur http://localhost:8000

### 1.2. Configuration de la base de donnÃ©es

https://laravel.com/docs/12.x/database

5. Configurer le fichier d'environnement `.env` pour pointer vers votre base de donnÃ©es. Nous utiliserons sqlite ([lien](https://laravel.com/docs/12.x/database#sqlite-configuration)).
6. Tester la connexion en lanÃ§ant la commande de migration par dÃ©faut fournie avec Laravel.

```shell
php artisan migrate
```

---

## 2. ğŸ’¡ **ModÃ©lisation du domaine (25 min)**

https://laravel.com/docs/12.x/eloquent

Nous allons gÃ©rer deux entitÃ©s : **Artist** et **Song**.

### 2.1. CrÃ©ation des modÃ¨les et migrations

7. GÃ©nÃ©rer un modÃ¨le **Artist** avec migration.
8. GÃ©nÃ©rer un modÃ¨le **Song** avec migration.

### 2.2. Configuration des migrations

Modifier la migration dâ€™artistes :
9. Ajouter un champ `name` (string).
10. Ajouter un champ `country` (string, nullable).

Modifier la migration des musiques :
11. Ajouter un champ `title` (string).
12. Ajouter un champ `year` (integer, nullable).
13. Ajouter un champ `duration` (integer, nullable).
14. Ajouter une clÃ© Ã©trangÃ¨re vers lâ€™artiste associÃ©. `artist_id` (foreignId, OnDelete Cascade)

15. Lancer toutes les migrations.

```shell
php artisan migrate
```

---

## 3. ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦ **DÃ©finition des relations Eloquent (10 min)**

https://laravel.com/docs/12.x/eloquent-relationships

Dans le modÃ¨le **Artist** :
16. DÃ©finir la relation "un artiste possÃ¨de plusieurs chansons".

Dans le modÃ¨le **Song** :
17. DÃ©finir la relation "une chanson appartient Ã  un artiste".

---

## 4. ğŸ›‚ **CrÃ©ation des contrÃ´leurs et des routes (30 min)**

### 4.1. CrÃ©ation des contrÃ´leurs

https://laravel.com/docs/12.x/controllers

18. GÃ©nÃ©rer un contrÃ´leur *ArtistController*.
19. GÃ©nÃ©rer un contrÃ´leur *SongController*.

### 4.2. Configuration des routes

https://laravel.com/docs/12.x/routing

20. CrÃ©er une route dâ€™accueil redirigeant vers la liste des artistes.
21. DÃ©finir les routes GET de base pour les artistes `/artists`.
22. DÃ©finir les routes GET de base pour les musiques `/songs`.

---

## 5. ğŸ‘ï¸ **Vue : Liste des artistes (30 min)**

### 5.1. ContrÃ´leur

23. Dans *ArtistController*, implÃ©menter une mÃ©thode permettant de rÃ©cupÃ©rer tous les artistes et de les envoyer Ã  une vue.

### 5.2. Vue Blade

https://laravel.com/docs/12.x/blade

CrÃ©er une vue affichant la liste des artistes :
24. Afficher tous les artistes sous forme de liste.
25. Ajouter un lien vers la page d'ajout d'un artiste.
26. Faire en sorte que chaque nom dâ€™artiste renvoie vers sa page de dÃ©tails.

---

## 6. ğŸ§‘â€ğŸ¤ **CrÃ©ation dâ€™un artiste (40 min)**

### 6.1. Enregistrement

29. Ajouter une opÃ©ration permettant de crÃ©er un nouvel artiste en base de donnÃ©es (route + mÃ©thode dans le contrÃ´leur).
30. Ajouter une mÃ©thode dans le contrÃ´leur pour valider les donnÃ©es reÃ§ues ([lien](https://laravel.com/docs/12.x/validation)).
31. Rediriger lâ€™utilisateur vers la liste des artistes aprÃ¨s la crÃ©ation.

---

## 7. ğŸ•µï¸ **Affichage dÃ©taillÃ© dâ€™un artiste (40 min)**

### 7.1. ContrÃ´leur

32. CrÃ©er une mÃ©thode pour afficher la page dÃ©taillÃ©e dâ€™un artiste.
33. Charger ses musiques associÃ©es.

### 7.2. Vue Blade

CrÃ©er une vue pour afficher un artiste :
34. Afficher le nom et le pays.
35. Lister les musiques associÃ©es (titre + annÃ©e).
36. Afficher un message si lâ€™artiste nâ€™a pas encore de musique.
37. Ajouter un lien "Ajouter une musique" prÃ©remplissant lâ€™artiste.

---

## 9. **Structure HTML commune (10 min)**

44. CrÃ©er une vue *layout* contenant lâ€™en-tÃªte et la navigation du site.
45. Adapter les autres vues pour quâ€™elles hÃ©ritent de ce layout.

---

## 10. **Extensions possibles (optionnel)**

46. Ajouter la modification dâ€™un artiste.
47. Ajouter la suppression dâ€™un artiste.
48. Ajouter la modification dâ€™une musique.
49. Ajouter la suppression dâ€™une musique.
50. Mettre en place une pagination sur la liste des artistes.
51. Ajouter un systÃ¨me de recherche.
52. Ajouter une API publique permettant de rÃ©cupÃ©rer les artistes en JSON.
53. Ajouter des Seeders pour remplir automatiquement la base.
